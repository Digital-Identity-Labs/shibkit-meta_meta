/**
 * jQuery.autotype - Simple, accurate, typing simulation for jQuery
 *
 * version 0.1
 * 
 * http://michaelmonteleone.net/projects/autotype
 * http://github.com/mmonteleone/jquery.autotype
 *
 * Copyright (c) 2009 Michael Monteleone
 * Licensed under terms of the MIT License (README.markdown)
 */
(function(e){var x=1,s=2,p=3,q=4,t=function(a){return a===null||a.length===0},k=function(a){return a.toUpperCase()===a},l=function(a){return a.toLowerCase()===a},y=function(a,b){return(k(a)&&l(b))||(l(a)&&k(b))},z=function(a){return k(a)?a.toLowerCase():a.toUpperCase()},A=function(b,c){var i=[],h=false,d={alt:false,meta:false,shift:false,ctrl:false},r=e.extend({},d),j='',m='',n=function(a){i.push(e.extend({},a,d))},u=function(a){d[a]=true;n({keyCode:c[a],charCode:0,char:'',type:p})},v=function(a){d[a]=false;n({keyCode:c[a],charCode:0,char:'',type:q})};for(var f=0;f<b.length;f++){if(!h&&f<=b.length-5&&b.charAt(f)==='{'&&b.charAt(f+1)==='{'){f++;h=true}else if(h&&f<=b.length-2&&b.charAt(f)==='}'&&b.charAt(f+1)==='}'){f++;if(d[j]!==undefined){r[j]=true;u(j)}else if(d[j.substring(1)]!==undefined){r[j]=false;v(j.substring(1))}else{n({keyCode:c[j],charCode:0,char:'',type:s,controlKeyName:j})}h=false;j=''}else if(h){j+=b.charAt(f)}else{var g=b.charAt(f);if((!t(m)&&y(m,g))||(t(m)&&k(g))){if(k(g)&&!d.shift){u("shift")}else if(l(g)&&d.shift&&!r.shift){v("shift")}}if((d.shift&&l(g))||(!d.shift&&k(g))){g=z(g)}var o={keyCode:c[g]||g.charCodeAt(0),charCode:g.charCodeAt(0),char:g,type:x};if(d.alt||d.ctrl||d.meta){o.char=''}n(o);if(o.char!==''){m=o.char}}}return i},w=function(a,b){var c={altKey:a.alt,metaKey:a.meta,shiftKey:a.shift,ctrlKey:a.ctrl};var i=e.extend(e.Event(),c,{type:'keydown',keyCode:a.keyCode,charCode:0});var h=e.extend(e.Event(),c,{type:'keypress',keyCode:0,charCode:a.charCode});var d=e.extend(e.Event(),c,{type:'keyup',keyCode:a.keyCode,charCode:0});if(a.type!==q){b.trigger(i)}if(a.type!==p&&a.type!==q){b.trigger(h)}if(!i.isPropagationStopped()&&!h.isPropagationStopped()){if(a.type===s){switch(a.controlKeyName){case'enter':b.val(b.val()+"\n");break;case'back':b.val(b.val().substring(0,b.val().length-1));break}}else{b.val(b.val()+a.char)}}if(a.type!==p){b.trigger(d)}},B=function(b,c,i,h){if(i>0){b=b.reverse();var d=h.setInterval(function(){var a=b.pop();w(a,c);if(b.length===0){h.clearInterval(d);c.trigger('autotyped')}},i)}else{e.each(b,function(){w(this,c)});c.trigger('autotyped')}};e.fn.autotype=function(a,b){if(a===undefined||a===null){throw("Value is required by jQuery.autotype plugin");}var c=e.extend({},e.fn.autotype.defaults,b);var i=A(a,c.keyCodes[c.keyBoard]);return this.each(function(){B(i,e(this),c.delay,c.global)})};e.fn.autotype.defaults={version:'0.5.0',keyBoard:'enUs',delay:0,global:window,keyCodes:{enUs:{'back':8,'ins':45,'del':46,'enter':13,'shift':16,'ctrl':17,'meta':224,'alt':18,'pause':19,'caps':20,'esc':27,'pgup':33,'pgdn':34,'end':35,'home':36,'left':37,'up':38,'right':39,'down':40,'printscr':44,'num0':96,'num1':97,'num2':98,'num3':99,'num4':100,'num5':101,'num6':102,'num7':103,'num8':104,'num9':105,'multiply':106,'add':107,'subtract':109,'decimal':110,'divide':111,'f1':112,'f2':113,'f3':114,'f4':115,'f5':116,'f6':117,'f7':118,'f8':119,'f9':120,'f10':121,'f11':122,'f12':123,'numlock':144,'scrolllock':145,'   ':9,' ':32,'tab':9,'space':32,'0':48,'1':49,'2':50,'3':51,'4':52,'5':53,'6':54,'7':55,'8':56,'9':57,')':48,'!':49,'@':50,'#':51,'$':52,'%':53,'^':54,'&':55,'*':56,'(':57,';':186,'=':187,',':188,'-':189,'.':190,'/':191,'[':219,'\\':220,']':221,"'":222,':':186,'+':187,'<':188,'_':189,'>':190,'?':191,'{':219,'|':220,'}':221,'"':222,'a':65,'b':66,'c':67,'d':68,'e':69,'f':70,'g':71,'h':72,'i':73,'j':74,'k':75,'l':76,'m':77,'n':78,'o':79,'p':80,'q':81,'r':82,'s':83,'t':84,'u':85,'v':86,'w':87,'x':88,'y':89,'z':90,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90}}}})(jQuery);



